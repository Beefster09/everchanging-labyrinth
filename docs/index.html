<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>The Ever-Changing Labyrinth</title>
    <script src="engine.js"></script>
    <script src="controller.js"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body id="everything" class="light-mode" onload="initPage()">
    <div id="play-column">
        <div id="game-controls">
            <div>Turn <span id="turn-counter" class="counter" style="width: 3ch;">N/A</span></div>
            <div>Score: <span id="score-tracker" class="counter" style="width: 5ch;">N/A</span></div>
            <div>Mana: <span id="mana-tracker" class="counter" style="width: 4ch;">N/A</span></div>
            <div>
                <label for="delay-control">Delay</label>
                <input id="delay-control" class="counter" type="number" min="0" max="10000" step="10" value="50">ms
            </div>
            <div class="playback-controls">
                <button id="pause-play">
                    <span class="play" title="play">▶️</span>
                    <span class="pause" title="pause">&#x23F8;</span>
                </button>
                <button id="step-btn" title="step">
                    <span>⏩</span>
                </button>
                <button id="abandon-game" title="Abandon game">
                    <span style="color: white; font-size: 46px; transform:translateY(-3px)">&times;</span>
                </button>
            </div>
        </div>
        <div class='canvas-container'>
            <canvas id="viewport" width="800" height="800" ></canvas>
        </div>
    </div>
    <div id="control-column">
        <button class="accordion active">Single Game</button>
        <div id="single-game" class='panel'>
            <div>
                <label for="adv-selector">Adventurer:</label>
                <select name="adventurer" id="adv-selector">
                    <option value=''><i>&lt;New Challenger&gt;</i></option>
                </select>
            </div>

            <div>
                <label name="mazemaster" for="mm-selector">Maze Master:</label>
                <select id="mm-selector">
                    <option value=''><i>&lt;New Challenger&gt;</i></option>
                </select>
            </div>

            <div>
                <label for="seed-input">Seed:</label>
                <input id="seed-input" type="text" placeholder="<random>">
                <button id="random-seed" onclick="document.getElementById('seed-input').value = genRandomSeed();">Random Seed</button>
            </div>
            <button id="start-single-game" class="start">Start</button>
        </div>

        <button class="accordion">Tournament</button>
        <div id="tournament-controls" class="panel">
            <p style="text-align: center;"><span class="note">Tournament not yet implemented</span></p>
        </div>

        <button class='accordion'>New Adventurers</button>
        <div id="new-adv" class="new-challenger panel">
            <div class="code-control">
                <button onclick="loadSourceInto('./template-adventurers.js', document.getElementById('new-adv-code'));">Load Basic Template</button>
                <button onclick="document.getElementById('new-adv-code').value = '';">CLEAR</button>
            </div>
            <textarea id="new-adv-code" placeholder="(Optional - type or paste function body to be tested here)" rows="30" cols="80">
            </textarea>
        </div>

        <button class="accordion">New Maze Master</button>
        <div id="new-mm" class="new-challenger panel">
            <div class="code-control">
                <button onclick="loadSourceInto('./template-maze-master.js', document.getElementById('new-mm-code'));">Load Basic Template</button>
                <button onclick="document.getElementById('new-mm-code').value = '';">CLEAR</button>
            </div>
            <textarea id="new-mm-code" placeholder="(Optional - type or paste function body to be tested here)" rows="30" cols="80">
            </textarea>
        </div>

        <button id="column-swapper">Change Column Order</button>
    </div>
    <button id="theme-toggle">
        <span class="sun" style="font-size: 60px;">&#x2600;&#xFE0E;</span>
        <span class="moon">&#x1F319;&#xFE0E;</span>
    </button>
</body>
</html>
